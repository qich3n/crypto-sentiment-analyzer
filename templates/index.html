<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Crypto Sentiment Analyzer</title>
  <link
    href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
    rel="stylesheet"
  />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Exo+2:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Exo 2', sans-serif;
    }
    
    .tech-font {
      font-family: 'Orbitron', monospace;
    }
    
    .dark-gradient {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
    }
    
    .glass-morphism {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .neon-border {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
      border: 1px solid rgba(59, 130, 246, 0.5);
    }
    
    .hover-lift {
      transition: all 0.3s ease;
    }
    
    .hover-lift:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #3b82f6, #8b5cf6, #06b6d4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-family: 'Orbitron', monospace;
      letter-spacing: 0.05em;
    }
    
    .tech-text {
      font-family: 'Orbitron', monospace;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    
    .subtle-glow {
      text-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
    }
    
    .accent-text {
      color: #64f4ff;
      text-shadow: 0 0 10px rgba(100, 244, 255, 0.4);
    }
    
    .pulse-glow {
      animation: pulse-glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes pulse-glow {
      from {
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
      }
      to {
        box-shadow: 0 0 30px rgba(59, 130, 246, 0.8);
      }
    }
    
    .floating-animation {
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-20px) rotate(2deg); }
      66% { transform: translateY(-10px) rotate(-2deg); }
    }
    
    .modern-input {
      background: rgba(15, 23, 42, 0.6);
      border: 2px solid rgba(59, 130, 246, 0.3);
      transition: all 0.3s ease;
    }
    
    .modern-input:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      outline: none;
    }
    
    .modern-button {
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .modern-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .modern-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
    }
    
    .modern-button:hover::before {
      left: 100%;
    }
    
    .sentiment-circle {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      margin: 0 auto;
      position: relative;
    }
    
    .bullish-circle {
      background: linear-gradient(135deg, #10b981, #059669);
      box-shadow: 0 0 40px rgba(16, 185, 129, 0.4);
    }
    
    .bearish-circle {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      box-shadow: 0 0 40px rgba(239, 68, 68, 0.4);
    }
    
    .neutral-circle {
      background: linear-gradient(135deg, #6b7280, #4b5563);
      box-shadow: 0 0 40px rgba(107, 114, 128, 0.4);
    }
    
    .progress-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 20px;
      border-radius: 10px;
      transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, 
        rgba(255,255,255,0) 0%, 
        rgba(255,255,255,0.3) 50%, 
        rgba(255,255,255,0) 100%
      );
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(200%); }
    }
    
    .metric-box {
      background: rgba(15, 23, 42, 0.4);
      border: 1px solid rgba(59, 130, 246, 0.2);
      transition: all 0.3s ease;
    }
    
    .metric-box:hover {
      border-color: #3b82f6;
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
    }
    
    .coin-tag {
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(59, 130, 246, 0.3);
      transition: all 0.3s ease;
    }
    
    .coin-tag:hover {
      background: rgba(59, 130, 246, 0.1);
      border-color: #3b82f6;
      transform: translateY(-2px);
    }
    
    .suggestion-dropdown {
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(59, 130, 246, 0.3);
    }
    
    .suggestion-item {
      transition: all 0.2s ease;
    }
    
    .suggestion-item:hover {
      background: rgba(59, 130, 246, 0.1);
    }
    
    .loading-spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 3px solid #ffffff;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .chart-bar {
      transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 8px 8px 0 0;
    }
    
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body class="dark-gradient min-h-screen relative">
  
  <!-- Animated Stars Background -->
  <div class="stars">
    <div class="star" style="top: 20%; left: 10%; width: 2px; height: 2px; animation-delay: 0s;"></div>
    <div class="star" style="top: 30%; left: 80%; width: 1px; height: 1px; animation-delay: 1s;"></div>
    <div class="star" style="top: 60%; left: 20%; width: 2px; height: 2px; animation-delay: 2s;"></div>
    <div class="star" style="top: 80%; left: 70%; width: 1px; height: 1px; animation-delay: 0.5s;"></div>
    <div class="star" style="top: 40%; left: 60%; width: 1px; height: 1px; animation-delay: 1.5s;"></div>
  </div>

  <div class="relative z-10 container mx-auto px-6 py-12">
    
    <!-- Header -->
    <div class="text-center mb-16">
      <h1 class="text-6xl font-bold text-white mb-6 tech-font subtle-glow">
        CRYPTO SENTIMENT
        <span class="gradient-text block mt-2">ANALYZER</span>
      </h1>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
        Real-time cryptocurrency sentiment analysis powered by 
        <span class="accent-text font-medium">social intelligence</span>.
        <br />
        Decode market emotions with advanced data processing.
      </p>
    </div>

    <!-- Main Interface -->
    <div class="max-w-5xl mx-auto">
      
      <!-- Input Section -->
      <div class="glass-morphism rounded-3xl p-8 mb-8 hover-lift">
        <div class="max-w-2xl mx-auto">
          <label for="coinInput" class="block text-white text-lg font-semibold mb-6 text-center tech-text">
            Initialize Analysis Target
          </label>
          
          <div class="flex flex-col sm:flex-row gap-4 mb-8">
            <div class="flex-1 relative">
              <input 
                type="text" 
                id="coinInput" 
                class="modern-input w-full p-4 rounded-xl text-lg text-white placeholder-gray-400" 
                placeholder="bitcoin, ethereum, solana..."
                autocomplete="off"
              />
              <div id="suggestions" class="suggestion-dropdown absolute top-full left-0 right-0 mt-2 rounded-xl shadow-2xl hidden z-20"></div>
            </div>
            <button 
              id="analyzeBtn" 
              class="modern-button px-8 py-4 rounded-xl text-lg font-semibold text-white min-w-[150px] flex items-center justify-center gap-3"
            >
              <span id="btnText">Analyze</span>
              <div id="btnSpinner" class="loading-spinner hidden"></div>
            </button>
          </div>

          <!-- Quick Select -->
          <div class="text-center">
            <p class="text-gray-400 text-sm mb-4 font-medium tech-text">Popular Assets</p>
            <div class="flex flex-wrap justify-center gap-3">
              <button class="coin-tag px-4 py-2 rounded-full text-sm font-medium text-gray-300 hover:text-white" data-coin="bitcoin">
                ₿ Bitcoin
              </button>
              <button class="coin-tag px-4 py-2 rounded-full text-sm font-medium text-gray-300 hover:text-white" data-coin="ethereum">
                Ξ Ethereum
              </button>
              <button class="coin-tag px-4 py-2 rounded-full text-sm font-medium text-gray-300 hover:text-white" data-coin="solana">
                ◎ Solana
              </button>
              <button class="coin-tag px-4 py-2 rounded-full text-sm font-medium text-gray-300 hover:text-white" data-coin="cardano">
                ₳ Cardano
              </button>
              <button class="coin-tag px-4 py-2 rounded-full text-sm font-medium text-gray-300 hover:text-white" data-coin="polkadot">
                ● Polkadot
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div id="resultsContainer" class="hidden">
        
        <!-- Main Sentiment Display -->
        <div class="glass-morphism rounded-3xl p-8 mb-8 neon-border pulse-glow">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
            
            <!-- Sentiment Circle -->
            <div class="text-center">
              <div id="sentimentCircle" class="sentiment-circle bullish-circle floating-animation">
                <span id="sentimentEmoji" class="text-white">🚀</span>
              </div>
              <h2 class="text-4xl font-bold text-white mt-6 mb-2 tech-font" id="coinName">Bitcoin</h2>
              <p class="text-xl text-gray-300 tech-text" id="sentimentLabel">Bullish Signal</p>
            </div>
            
            <!-- Sentiment Data -->
            <div class="space-y-6">
              <div class="text-center lg:text-left">
                <div class="text-6xl font-bold accent-text mb-2 tech-font" id="sentimentPercent">67%</div>
                <div class="text-lg text-gray-400 font-medium tech-text">Sentiment Index</div>
              </div>
              
              <!-- Progress Bar -->
              <div class="progress-track p-1">
                <div id="sentimentBar" class="progress-fill bg-gradient-to-r from-green-500 to-emerald-400" style="width: 67%"></div>
              </div>
              
              <!-- Scale -->
              <div class="flex justify-between text-sm text-gray-400 font-medium tech-text">
                <span>📉 Bear</span>
                <span>⚖️ Neutral</span>
                <span>📈 Bull</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Analytics Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div class="metric-box rounded-2xl p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="text-blue-400 text-3xl">📊</div>
              <div class="text-xs text-gray-500 uppercase tracking-wider font-semibold tech-text">Source</div>
            </div>
            <div class="text-white font-bold text-xl tech-font">Reddit</div>
            <div class="text-gray-400">r/CryptoCurrency</div>
          </div>
          
          <div class="metric-box rounded-2xl p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="text-purple-400 text-3xl">⏱️</div>
              <div class="text-xs text-gray-500 uppercase tracking-wider font-semibold tech-text">Status</div>
            </div>
            <div class="text-white font-bold text-xl tech-font" id="lastUpdated">Live</div>
            <div class="text-gray-400">Real-time feed</div>
          </div>
          
          <div class="metric-box rounded-2xl p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="text-cyan-400 text-3xl">🔍</div>
              <div class="text-xs text-gray-500 uppercase tracking-wider font-semibold tech-text">Sample</div>
            </div>
            <div class="text-white font-bold text-xl tech-font" id="postsCount">25</div>
            <div class="text-gray-400">Posts analyzed</div>
          </div>
        </div>

        <!-- Sentiment Breakdown Chart -->
        <div class="glass-morphism rounded-3xl p-8">
          <h3 class="text-2xl font-bold text-white mb-8 text-center tech-font">
            <span class="gradient-text">Data Matrix</span>
          </h3>
          
          <div class="max-w-md mx-auto">
            <div class="flex items-end justify-center space-x-8 h-48 mb-6">
              <div class="flex flex-col items-center">
                <div class="chart-bar bg-gradient-to-t from-green-600 to-green-400" 
                     style="width: 60px; height: 120px;" id="bullishBar"></div>
                <div class="text-green-400 font-semibold mt-4 text-sm tech-text">Bull</div>
                <div class="text-gray-400 text-sm tech-font" id="bullishPercent">67%</div>
              </div>
              
              <div class="flex flex-col items-center">
                <div class="chart-bar bg-gradient-to-t from-gray-600 to-gray-400" 
                     style="width: 60px; height: 40px;" id="neutralBar"></div>
                <div class="text-gray-400 font-semibold mt-4 text-sm tech-text">Neutral</div>
                <div class="text-gray-400 text-sm tech-font" id="neutralPercent">20%</div>
              </div>
              
              <div class="flex flex-col items-center">
                <div class="chart-bar bg-gradient-to-t from-red-600 to-red-400" 
                     style="width: 60px; height: 26px;" id="bearishBar"></div>
                <div class="text-red-400 font-semibold mt-4 text-sm tech-text">Bear</div>
                <div class="text-gray-400 text-sm tech-font" id="bearishPercent">13%</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Error State -->
      <div id="errorContainer" class="hidden">
        <div class="glass-morphism rounded-3xl p-8 text-center border border-red-500/30">
          <div class="text-6xl mb-6">⚠️</div>
          <h3 class="text-3xl font-bold text-red-400 mb-4 tech-font">Analysis Failed</h3>
          <p class="text-gray-300 text-lg mb-6" id="errorMessage">Unable to fetch sentiment data</p>
          <button id="retryBtn" class="modern-button px-6 py-3 rounded-xl font-medium text-white tech-text">
            Try Again
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div id="emptyContainer" class="text-center py-16">
        <div class="text-8xl mb-8">🌌</div>
        <h3 class="text-4xl font-bold text-white mb-6 tech-font subtle-glow">System Ready</h3>
        <p class="text-gray-400 text-xl max-w-2xl mx-auto leading-relaxed">
          Initialize sentiment analysis protocol by entering 
          <span class="accent-text">target cryptocurrency</span>
        </p>
      </div>
    </div>

    <!-- Footer -->
    <div class="text-center mt-16 text-gray-500">
      <div class="flex items-center justify-center space-x-4 mb-4">
        <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
        <p class="text-sm font-medium tech-text">Neural Network Active</p>
        <div class="w-2 h-2 bg-purple-400 rounded-full animate-pulse" style="animation-delay: 0.5s;"></div>
      </div>
      <p class="text-xs">Advanced sentiment processing • Real-time social intelligence</p>
    </div>
  </div>

  <script>
    const popularCoins = [
      'bitcoin', 'ethereum', 'solana', 'cardano', 'polkadot', 'chainlink', 
      'avalanche', 'polygon', 'dogecoin', 'litecoin', 'stellar', 'vechain'
    ];

    document.addEventListener("DOMContentLoaded", () => {
      const analyzeBtn = document.getElementById("analyzeBtn");
      const coinInput = document.getElementById("coinInput");
      const btnText = document.getElementById("btnText");
      const btnSpinner = document.getElementById("btnSpinner");
      const resultsContainer = document.getElementById("resultsContainer");
      const errorContainer = document.getElementById("errorContainer");
      const emptyContainer = document.getElementById("emptyContainer");
      const suggestions = document.getElementById("suggestions");
      const retryBtn = document.getElementById("retryBtn");

      // Coin suggestion handlers
      document.querySelectorAll('.coin-tag').forEach(btn => {
        btn.addEventListener('click', () => {
          coinInput.value = btn.dataset.coin;
          analyzeSentiment();
        });
      });

      // Auto-complete
      coinInput.addEventListener('input', (e) => {
        const value = e.target.value.toLowerCase();
        if (value.length > 1) {
          const matches = popularCoins.filter(coin => 
            coin.toLowerCase().includes(value)
          ).slice(0, 5);
          
          if (matches.length > 0) {
            suggestions.innerHTML = matches.map(coin => 
              `<div class="suggestion-item p-4 cursor-pointer text-white capitalize hover:bg-blue-500/10" onclick="selectCoin('${coin}')">${coin}</div>`
            ).join('');
            suggestions.classList.remove('hidden');
          } else {
            suggestions.classList.add('hidden');
          }
        } else {
          suggestions.classList.add('hidden');
        }
      });

      // Event listeners
      analyzeBtn.addEventListener("click", analyzeSentiment);
      retryBtn.addEventListener("click", analyzeSentiment);
      coinInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") analyzeSentiment();
      });

      document.addEventListener('click', (e) => {
        if (!coinInput.contains(e.target) && !suggestions.contains(e.target)) {
          suggestions.classList.add('hidden');
        }
      });

      function analyzeSentiment() {
        const coin = coinInput.value.trim() || "bitcoin";
        
        // Loading state
        btnText.textContent = "Analyzing...";
        btnSpinner.classList.remove("hidden");
        analyzeBtn.disabled = true;
        
        hideAllContainers();
        suggestions.classList.add("hidden");

        fetch(`/api/analyze?coin=${coin}`)
          .then((res) => res.json())
          .then((data) => {
            if (data.error) {
              showError(data.error);
              return;
            }
            showResults(data);
          })
          .catch((err) => {
            console.error(err);
            showError("Network error. Please check your connection and try again.");
          })
          .finally(() => {
            btnText.textContent = "Analyze";
            btnSpinner.classList.add("hidden");
            analyzeBtn.disabled = false;
          });
      }

      function showResults(data) {
        const percentage = Math.round(data.sentimentPercent);
        const isBullish = data.sentimentDirection === "Bullish";
        
        // Update main display
        document.getElementById("coinName").textContent = 
          data.coin.charAt(0).toUpperCase() + data.coin.slice(1);
        document.getElementById("sentimentPercent").textContent = `${percentage}%`;
        
        // Update circle and styling
        const circle = document.getElementById("sentimentCircle");
        const emoji = document.getElementById("sentimentEmoji");
        const label = document.getElementById("sentimentLabel");
        const bar = document.getElementById("sentimentBar");
        
        if (isBullish) {
          circle.className = "sentiment-circle bullish-circle floating-animation";
          emoji.textContent = "🚀";
          label.textContent = "Bullish Signal";
          bar.className = "progress-fill bg-gradient-to-r from-green-500 to-emerald-400";
        } else {
          circle.className = "sentiment-circle bearish-circle floating-animation";
          emoji.textContent = "📉";
          label.textContent = "Bearish Signal";
          bar.className = "progress-fill bg-gradient-to-r from-red-500 to-red-400";
        }
        
        // Update progress bar
        bar.style.width = `${percentage}%`;
        
        // Update timestamp
        document.getElementById("lastUpdated").textContent = "Live";
        
        // Update chart (mock data for visualization)
        const bullishPercent = isBullish ? percentage : 100 - percentage;
        const bearishPercent = isBullish ? 100 - percentage : percentage;
        const neutralPercent = Math.max(10, Math.min(30, Math.abs(50 - percentage)));
        
        document.getElementById("bullishBar").style.height = `${bullishPercent * 1.2}px`;
        document.getElementById("bearishBar").style.height = `${bearishPercent * 1.2}px`;
        document.getElementById("neutralBar").style.height = `${neutralPercent}px`;
        
        document.getElementById("bullishPercent").textContent = `${Math.round(bullishPercent)}%`;
        document.getElementById("bearishPercent").textContent = `${Math.round(bearishPercent)}%`;
        document.getElementById("neutralPercent").textContent = `${Math.round(neutralPercent)}%`;
        
        resultsContainer.classList.remove("hidden");
      }

      function showError(message) {
        document.getElementById("errorMessage").textContent = message;
        errorContainer.classList.remove("hidden");
      }

      function hideAllContainers() {
        resultsContainer.classList.add("hidden");
        errorContainer.classList.add("hidden");
        emptyContainer.classList.add("hidden");
      }
    });

    function selectCoin(coin) {
      document.getElementById("coinInput").value = coin;
      document.getElementById("suggestions").classList.add("hidden");
    }
  </script>
</body>
</html>